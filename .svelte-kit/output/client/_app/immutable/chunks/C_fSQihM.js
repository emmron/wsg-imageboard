import{F as O,o as V,m as A,X as k,Y as D}from"./xePfXsBy.js";import{w as C}from"./CHYTBi4e.js";function U(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function q(e,t){A(e,1,1,()=>{t.delete(e.key)})}function J(e,t,s,a,i,n,r,o,h,d,u,T){let l=e.length,f=n.length,m=l;const v={};for(;m--;)v[e[m].key]=m;const $=[],p=new Map,_=new Map,S=[];for(m=f;m--;){const c=T(i,n,m),y=s(c);let w=r.get(y);w?S.push(()=>w.p(c,t)):(w=d(y,c),w.c()),p.set(y,$[m]=w),y in v&&_.set(y,Math.abs(m-v[y]))}const M=new Set,F=new Set;function b(c){V(c,1),c.m(o,u),r.set(c.key,c),u=c.first,f--}for(;l&&f;){const c=$[f-1],y=e[l-1],w=c.key,x=y.key;c===y?(u=c.first,l--,f--):p.has(x)?!r.has(w)||M.has(w)?b(c):F.has(x)?l--:_.get(w)>_.get(x)?(F.add(w),b(c)):(M.add(x),l--):(h(y,r),l--)}for(;l--;){const c=e[l];p.has(c.key)||h(c,r)}for(;f;)b($[f-1]);return O(S),$}const z=C([]),P=C([]),j=C(""),K=typeof window<"u"?localStorage.getItem("videos"):null;K&&z.set(JSON.parse(K));z.subscribe(e=>{typeof window<"u"&&localStorage.setItem("videos",JSON.stringify(e))});function W(e=""){const t=Date.now().toString(),s=Math.random().toString(36).substring(2,15),a=e+t+s;let i=0;for(let n=0;n<a.length;n++){const r=a.charCodeAt(n);i=(i<<5)-i+r,i=i&i}return Math.abs(i).toString(16).substring(0,8)}function B(e){const s=new Date-e,a=Math.floor(s/6e4),i=Math.floor(s/36e5),n=Math.floor(s/864e5);return a<1?"Just now":a<60?`${a}m ago`:i<24?`${i}h ago`:n<7?`${n}d ago`:e.toLocaleDateString()}const g={maxFileSize:500*1024*1024,maxTitleLength:100,maxTagLength:30,maxTags:10,maxCommentLength:1e3,allowedVideoTypes:["video/mp4","video/webm","video/ogg","video/avi","video/mov","video/wmv"],bannedKeywords:["leak","leaked","stolen","hacked","revenge","underage","minor","child","kid","private","personal","secret"]};function E(e){const t=[];return e?(e.size>g.maxFileSize&&t.push(`File too large. Max size: ${Math.round(g.maxFileSize/1024/1024)}MB`),g.allowedVideoTypes.includes(e.type)||t.push("Invalid file type. Only video files allowed."),/(?:leak|stolen|hack|revenge|private|personal)/i.test(e.name)&&t.push("Filename contains inappropriate content"),{valid:t.length===0,errors:t,warnings:[]}):(t.push("No file selected"),{valid:!1,errors:t})}function H(e){const t=[],s=[];if(!e||e.trim().length===0)return t.push("Title is required"),{valid:!1,errors:t,warnings:s};e.length>g.maxTitleLength&&t.push(`Title too long. Max ${g.maxTitleLength} characters.`);const a=e.toLowerCase();return g.bannedKeywords.filter(n=>a.includes(n.toLowerCase())).length>0&&s.push("Title may contain inappropriate content. Please review community guidelines."),{valid:t.length===0,errors:t,warnings:s}}function Q(e){const t=[],s=[];if(!e||e.trim().length===0)return{valid:!0,errors:[],warnings:[],cleanTags:[]};const a=e.split(",").map(o=>o.trim()).filter(o=>o.length>0);a.length>g.maxTags&&t.push(`Too many tags. Max ${g.maxTags} allowed.`),a.filter(o=>o.length>g.maxTagLength).length>0&&t.push(`Tags too long. Max ${g.maxTagLength} characters per tag.`),a.filter(o=>{const h=o.toLowerCase();return g.bannedKeywords.some(d=>h.includes(d.toLowerCase()))}).length>0&&s.push("Some tags may be inappropriate. Consider reviewing them.");const r=a.map(o=>o.replace(/[<>]/g,"")).filter(o=>o.length>0);return{valid:t.length===0,errors:t,warnings:s,cleanTags:r}}function R(e){const t=[],s=[];if(!e||e.trim().length===0)return t.push("Comment cannot be empty"),{valid:!1,errors:t,warnings:s};e.length>g.maxCommentLength&&t.push(`Comment too long. Max ${g.maxCommentLength} characters.`);const a=e.toLowerCase();g.bannedKeywords.filter(o=>a.includes(o.toLowerCase())).length>0&&s.push("Comment may contain inappropriate content.");const n=/(.)\1{10,}/,r=/[A-Z]{20,}/;return(n.test(e)||r.test(e))&&s.push("Comment appears to be spam-like."),{valid:t.length===0,errors:t,warnings:s}}function X(e){return e.replace(/[<>]/g,"").replace(/javascript:/gi,"").trim()}function L(e){const t=e-1;return t*t*t+1}function Y(e){return--e*e*e*e*e+1}function Z(e,{delay:t=0,duration:s=400,easing:a=D}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:a,css:n=>`opacity: ${n*i}`}}function G(e,{delay:t=0,duration:s=400,easing:a=L,x:i=0,y:n=0,opacity:r=0}={}){const o=getComputedStyle(e),h=+o.opacity,d=o.transform==="none"?"":o.transform,u=h*(1-r),[T,l]=k(i),[f,m]=k(n);return{delay:t,duration:s,easing:a,css:(v,$)=>`
			transform: ${d} translate(${(1-v)*T}${l}, ${(1-v)*f}${m});
			opacity: ${h-u*$}`}}function ee(e,{delay:t=0,duration:s=400,easing:a=L,axis:i="y"}={}){const n=getComputedStyle(e),r=+n.opacity,o=i==="y"?"height":"width",h=parseFloat(n[o]),d=i==="y"?["top","bottom"]:["left","right"],u=d.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),T=parseFloat(n[`padding${u[0]}`]),l=parseFloat(n[`padding${u[1]}`]),f=parseFloat(n[`margin${u[0]}`]),m=parseFloat(n[`margin${u[1]}`]),v=parseFloat(n[`border${u[0]}Width`]),$=parseFloat(n[`border${u[1]}Width`]);return{delay:t,duration:s,easing:a,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*r};${o}: ${p*h}px;padding-${d[0]}: ${p*T}px;padding-${d[1]}: ${p*l}px;margin-${d[0]}: ${p*f}px;margin-${d[1]}: ${p*m}px;border-${d[0]}-width: ${p*v}px;border-${d[1]}-width: ${p*$}px;`}}function te(e,{delay:t=0,duration:s=400,easing:a=L,start:i=0,opacity:n=0}={}){const r=getComputedStyle(e),o=+r.opacity,h=r.transform==="none"?"":r.transform,d=1-i,u=o*(1-n);return{delay:t,duration:s,easing:a,css:(T,l)=>`
			transform: ${h} scale(${1-d*l});
			opacity: ${o-u*l}
		`}}export{H as a,Q as b,z as c,L as d,U as e,G as f,W as g,te as h,j as i,P as j,Z as k,R as l,B as m,ee as n,q as o,Y as q,X as s,J as u,E as v};
